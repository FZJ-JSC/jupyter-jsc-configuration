#!/bin/bash
mount | grep "/mnt/B2DROP" > /dev/null
EC=$?
if [[ $EC -eq 0 ]]; then
  echo "/mnt/B2DROP is already mounted."
else
  if [[ -f /home/jovyan/.davfs2/secrets ]]; then
    cat /home/jovyan/.davfs2/secrets | grep "https://b2drop.eudat.eu/remote.php/webdav" &> /dev/null
    EC=$?
    if [[ $EC -eq 0 ]]; then
      mount /mnt/B2DROP
    else
      echo "Secret is not stored. Do not auto mount B2DROP."
    fi
  fi
fi

